<!DOCTYPE html><html><head><meta charset="utf-8"/><link href="http://feeds.feedburner.com/suspended-chord/blog" rel="alternate" title="a-&gt;ab" type="application/rss+xml"/><link href="https://plus.google.com/114523146530319290209/posts" rel="author"/><meta content="text/html; charset=utf-8" http-equiv="Content-Type"/><link href="/static/assets/packed.css" media="all" rel="stylesheet" type="text/css"/><script src="https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript">
    </script><title>MSP430G2xxx based Tea Timer | a-&gt;ab</title></head><body><div class="container"><header><h1>a→ab</h1><h2>computation, game design, and experimentation</h2><br/> <a href="/">front page</a> | <a href="/about">about</a> | <a href="/archives">archives</a> | <a href="/code-dump">code dump</a> | <a href="/csmm">c.s. for mere mortals</a> | <a href="/tags">tags</a> | <span class="rss"><a href="http://feeds.feedburner.com/suspended-chord/blog">rss feed</a></span></header><section><div class="column"><article class="post"><header><h1>MSP430G2xxx based Tea Timer</h1><span class="date">November 8, 2010</span><br/> <span class="tags">tags:</span></header><section class="content"><p>Hello all,</p><p>I am an avid tea drinker. As such, I make many cups of various kinds of tea, each with their own optimal steep times. Usually, I just keep track of the time, but I have found that I can make the best cup of tea by setting a timer to go off after a certain amount of time, depending on the style of tea that I am brewing. I find the best results come from going by the following table (based on personal preference and experimentation):</p><table><tbody><tr><td><b>Tea Variety</b></td><td><b>Recommended Steep Time</b></td></tr><tr><td>White tea</td><td>2 minutes</td></tr><tr><td>Green tea</td><td>3 minutes</td></tr><tr><td>Black/Oolong tea</td><td>4 minutes</td></tr><tr><td>Herbal tea/infusions (most varieties)</td><td>5 minutes</td></tr><tr><td>Rooibos tea (African redbush)</td><td>6 minutes</td></tr><tr><td>Chai tea (regardless of base)</td><td>8 minutes</td></tr><tr><td>Kukicha twig tea and other varieties</td><td>in intervals of 1 minute</td></tr></tbody></table><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p>With this in mind, I decided that I should make a tea timer. This seems simple enough, and it has been on my to-do list for a while anyway, and <a href="http://43oh.com/">43oh!</a> is having an <a href="http://www.43oh.com/forum/viewtopic.php?f=13&amp;t=166">MSP430 Project of the Month Contest</a>, so I decided to hack it together. Turned out rather simple.</p><p>The full part count is as follows:</p><ul><li>3 toggle switches (or a 3-switch DIP, as I used)</li><li>4 10k resistors</li><li>1 5mm green LED</li><li>1 piezo buzzer with integrated driver circuit</li><li>1 tact switch/push button</li><li>wire</li><li>Any MSP430 uC with at least 1k flash and a TimerA module (though I could have hacked the WDT to work)</li></ul><p>So, I assembled the circuit on my breadboard, following the schematic at the end of my post, and programmed the MSP430.</p><p>For the code, I borrowed <a href="http://mspsci.blogspot.com/">beretta's</a> TimerA code example, and tweaked it to fit the needs of my timer. The timer is to read the input value of the three switches as a binary value to determine tea type, set a "goal" amount of half-second ticks based upon the user's request, and when the user presses the "start" button, go into a waiting period. While the uC is waiting, the LED will be flashed slowly at first, but increasingly faster as the timer ticks closer to the goal. Once the goal amount of ticks has been reached, the LED will be turned on, and the buzzer will sound (mine sounds reminiscent of an old-fashioned tea kettle, so it's suitable). The buzzing can be stopped by pressing the "start" button again to reset the device, and allow another time to be set. Simple enough, right?</p><p>The code is available:</p><p><a href="https://github.com/gatesphere/blog-resources/raw/master/downloads/source/g2xxx-teatimer.c">click here</a>.</p><p>Basically, as I stated above, the user selects a mode (tea type) by way of the three switches, and then presses a button to start the timer. When the tea is done steeping, the buzzer goes off, and the user can press the button again to reset it. The switch positions corresponding to the tea types are as follows:</p><table><tbody><tr><td><b>P1.6</b></td><td><b>P1.5</b></td><td><b>P1.4</b></td><td><b>Tea type (time)</b></td></tr><tr><td>0</td><td>0</td><td>0</td><td>White Tea (2 minutes)</td></tr><tr><td>0</td><td>0</td><td>1</td><td>Green Tea (3 minutes)</td></tr><tr><td>0</td><td>1</td><td>0</td><td>Black/Oolong Tea (4 minutes)</td></tr><tr><td>0</td><td>1</td><td>1</td><td>Herbal Tea/Infusions (5 minutes)</td></tr><tr><td>1</td><td>0</td><td>0</td><td>Chai Tea (8 minutes)</td></tr><tr><td>1</td><td>0</td><td>1</td><td>Rooibos Tea (6 minutes)</td></tr><tr><td>1</td><td>1</td><td>0</td><td>Other1 (1 minute)</td></tr><tr><td>1</td><td>1</td><td>1</td><td>Other2 (30 seconds)</td></tr></tbody></table><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p>Now, this isn't the most accurate timer, as I'm not using the crystal, but it's accurate enough to steep a good cup of tea (believe me, I've used it a lot since I hacked it together), and my stopwatch tells me it's accurate to within around 6 seconds on average.</p><p>In the future, I'd like to use a better input mechanism (I might be geeky enough to remember binary codes for tea types, but most are not, so a rotary switch or something would be perfect), maybe a cheap LCD for a status indicator, even showing how much time remains, and potentially having the last two codes (110 and 111) be user programmable for any time in second increments up to half of an unsigned long (as the ticks are half-second ticks). Maybe even shove it all into an Altoids tin for portability and the geek-chic factor. Who knows?</p><p>Anyways, here's the schematic, and a photo of it in action:</p><p>Tea-Timer in action! (notice the LaunchPad is only used as a power supply here... I don't have a battery clip yet.)</p><p><img alt="tea-timer in action!" src="https://github.com/gatesphere/blog-resources/raw/master/downloads/images/g2xxxteatimer/teatimer.png"/></p><p>schematic</p><p><img alt="schematic" src="https://github.com/gatesphere/blog-resources/raw/master/downloads/images/g2xxxteatimer/schematic.png"/></p><p>Thanks for reading!</p><p>Keep tweaking~</p><p><strong>EDIT:</strong> Featured on 43oh! again! Check it <a href="http://www.43oh.com/2010/11/msp430_tea_timer_steep/">here</a>!</p><p><strong>EDIT THE SECOND:</strong> Ended up tied for 4th place. Congratulations to the winners, AMagill and simpleavr! Check out the results <a href="http://43oh.com/forum/viewtopic.php?f=9&amp;t=167&amp;start=0">here</a>.</p></section><section class="comments"><div id="disqus_thread"></div><script src="http://disqus.com/forums/suschord/embed.js" type="text/javascript"> </script><noscript>&lt;a href="http://suschord.disqus.com/?url=ref"&gt;View the discussion thread.&lt;/a&gt;</noscript><a class="dsq-brlink" href="http://disqus.com">blog comments powered by <span class="logo-disqus">Disqus</span></a></section></article></div></section><footer>a→ab is the blog of Jake Peck, also known as <a href="http://suspended-chord.info/">suspended-chord</a></footer><script type="text/javascript">
var disqus_shortname = 'suschord';
(function () {
  var s = document.createElement('script'); s.async = true;
  s.src = 'http://disqus.com/forums/suschord/count.js';
  (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script></div></body></html>