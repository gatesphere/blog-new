<!--@+leo-ver=5-thin-->
<!--@+node:peckj.20140121082121.6610: * @file page.html-->
<!--@@language html-->
<!--@+leo-ver=5-thin-->
<!--@+node:peckj.20140121082121.6614: * @file base.html-->
<!--@@language html-->
<!doctype html>
<html>
<head>
  <meta charset="utf-8">

  
    
      <!--@+leo-ver=5-thin-->
<!--@+node:peckj.20140121082121.6607: * @file _meta.html-->
<!--@@language html-->




<link rel="alternate" type="application/rss+xml" title="a-&gt;ab" href="http://feeds.feedburner.com/suspended-chord/blog">
<link rel="author" href="https://plus.google.com/114523146530319290209/posts">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
<!--@-leo-->
    
  

  <!--@+leo-ver=5-thin-->
<!--@+node:peckj.20140121082121.6608: * @file _style.html-->
<!--@@language html-->


    <link href="/static/assets/packed.css" media="all" rel="stylesheet" type="text/css" />

<!--@-leo-->
  <!--@+leo-ver=5-thin-->
<!--@+node:peckj.20140121082121.6605: * @file _js.html-->
<!--@@language html-->

    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
<!--@-leo-->

  <title>Connecting a Parallax PIR Sensor module to the LaunchPad | a->ab</title>

</head>
<body>
  <div class="container">

  <!--@+leo-ver=5-thin-->
<!--@+node:peckj.20140121082121.6604: * @file _header.html-->
<!--@@language html-->

<header>
  <h1>a&rarr;ab</h1><h2>computation, game design, and experimentation</h2><br />
  <a href="/">front page</a> | <a href="/about">about</a> | <a href="/archives">archives</a> | <a href="/code-dump">code dump</a> | <a href="/csmm">c.s. for mere mortals</a> | <a href="/tags">tags</a> | <span class='rss'><a href="http://feeds.feedburner.com/suspended-chord/blog">rss feed</a></span>
</header>
 
<!--@-leo-->

<section>
<div class="column">


  <article class="post">
  <header>
  <h1>Connecting a Parallax PIR Sensor module to the LaunchPad</h1>
  <span class="date">September 12, 2010</span><br />
  <span class="tags">
    tags:&nbsp;
    
    <a href="/tag/code-dump/">code-dump</a>
    
  </span>
  </header>
  <section class="content">
    <p>Hello all.
A few days ago, I went to RadioShack to purchase a few parts. Among the components in the "sensors" drawer, I stumbled upon a PIR sensor from Parallax, datasheet available <a href="http://www.parallax.com/sites/default/files/downloads/910-28027-PIR-Sensor-REV-A-Documentation-v1.4.pdf">here</a>.</p>
<p>I thought, "hey, what the heck? I've wanted to toy around with one of these for a while, and it's only $10. Why not?". So I bought it.</p>
<p>I also thought, "I should be able to use this with both the LaunchPad and the Arduino due to the input voltage range." I was only partially correct on that last point.</p>
<p>So, I purchased the sensor, took it home, and started playing with it. At first, I didn't use it with anything but an LED. It was fun, lit the LED, and did it's job in detecting motion. Nice, simple, compact, and neat. Then I wrote a simple Arduino sketch to interface with the data output to light the LED on pin D13. It worked like a charm.</p>
<p>Then, I tried to do the same with the LaunchPad. It didn't work.</p>
<p>Well, it did, but not in a way that the datasheet made clear at all. The datasheet has absolutely no electrical characteristics listed at all. It simply states that the output is one-bit HIGH or LOW.</p>
<p>This is kind of hit or miss. The sensor outputs about 2/3 of the input voltage and calls it "HIGH". LOW, however, is tied to ground perfectly. I didn't discover this until I compared output to the full voltage reading on my oscilloscope (which is in reality a re-purposed Arduino), and it turns out that this is the missing link in the chain.</p>
<p>The LaunchPad operates at 3.3V, whereas the Arduino (or, at least, the Arduino Duemilanove) operates at 5V. When operating from a 5V source, the output pin pulses at ~3V. But when operating from a 3.3V source, such as the LaunchPad, the pulse is a mere ~1.7V. The MSP430 line, as juani_c from the <a href="http://43oh.com/forum/">43oh! Forums</a> points out, requires 0.7*Vcc, or ~2.31V at Vcc=3.3V, to register as HIGH. (It seems the ATMEL uC's are much more sensitive) So clearly, powering from the LaunchPad's standard 3.3V is not going to be a valid option.</p>
<p>So, what I did, was tap in the the tie points on the LaunchPad, labeled TP1 and TP3. They are located near the USB port, and left unpopulated on the boards as shipped. According to the schematics found in the LaunchPad User's Guide, TP1 is connected to VBUS (USB's Voltage, which happens to be 5V), and TP3 is connected to the USB's GND.</p>
<p>So, I soldered a few one pin headers into these tie points (not an easy task, for one with unsteady hands... helping hands are a must) and used those to power the PIR. And guess what, it works!</p>
<p>So, after I made sure the sensor was working, I wrote up a simple little code example to share with you all.</p>
<p>Code available:</p>
<p><a href="https://github.com/gatesphere/blog-resources/raw/master/downloads/source/launchpadpirsensor.c">click here</a>.</p>
<p>This is just a small example. The code sets up P1.5 as the input of the PIR sensor, and takes an interrupt on that pin to toggle LED1 when motion is detected by the PIR. LED2 is always on to indicate power. After everything is set up, the uC goes into LPM4 to conserve power, waking up on an interrupt on P1.5. It's rather simple, actually, but I think it could come in handy for some people to get a jump start on a motion detecting application of some sort.</p>
<p>Anyways, I hope you have enjoyed this, and that you find this helpful. As always, feel free to ask questions and leave comments. I will answer them as soon as I get them.</p>
<p>Thanks for reading!</p>
<p>Keep tweaking</p>
<p>EDIT: Now, photos!</p>
<p>1: Close up on TP1 and TP3 near the USB port. I also added headers to the other TP pins, just because I might need them in the future should I want to toy around with the emulator.
<img alt="1" src="https://github.com/gatesphere/blog-resources/raw/master/downloads/images/launchpadpir/LaunchPadPIR_01.png" /></p>
<p>2: Solder points for TP1 and TP3. Ignore the bad soldering.
<img alt="2" src="https://github.com/gatesphere/blog-resources/raw/master/downloads/images/launchpadpir/LaunchPadPIR_02.png" /></p>
<p>3: The full setup.
<img alt="3" src="https://github.com/gatesphere/blog-resources/raw/master/downloads/images/launchpadpir/LaunchPadPIR_03.png" /></p>
<p>4: Close up on the 5V and GND connections. Alligator clips are sloppy, but it's all I had on hand.
<img alt="4" src="https://github.com/gatesphere/blog-resources/raw/master/downloads/images/launchpadpir/LaunchPadPIR_04.png" /></p>
<p>5: In action, no movement (no red LED1 lit).
<img alt="5" src="https://github.com/gatesphere/blog-resources/raw/master/downloads/images/launchpadpir/LaunchPadPIR_05.png" /></p>
<p>6: In action, movement detected (red LED1 is lit).
<img alt="6" src="https://github.com/gatesphere/blog-resources/raw/master/downloads/images/launchpadpir/LaunchPadPIR_06.png" /></p>
<p>EDIT 2: Featured on <a href="http://www.43oh.com/">43oh</a> for the third time. Link <a href="http://www.43oh.com/2010/09/interface-the-launchpad-to-a-parallax-pir-sensor/">here</a>. Thanks bluehash! </p>
  </section>
  <section class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript" src="http://disqus.com/forums/suschord/embed.js"> </script>
    <noscript><a href="http://suschord.disqus.com/?url=ref">View the discussion thread.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
  </section>
</article>

</div>
</section>

  <!--@+leo-ver=5-thin-->
<!--@+node:peckj.20140121082121.6603: * @file _footer.html-->
<!--@@language html-->

<footer>
  a&rarr;ab is the blog of Jake Peck, also known as <a href="http://suspended-chord.info/">suspended-chord</a>
</footer>
<!--@-leo-->


  <!--@+leo-ver=5-thin-->
<!--@+node:peckj.20140121082121.6648: * @file _endjs.html-->
<!--@@language html-->

<script type="text/javascript">
var disqus_shortname = 'suschord';
(function () {
  var s = document.createElement('script'); s.async = true;
  s.src = 'http://disqus.com/forums/suschord/count.js';
  (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>
<!--@-leo-->

  </div>
</body>
</html>

<!--@-leo-->