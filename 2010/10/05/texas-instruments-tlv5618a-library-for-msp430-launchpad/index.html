<!--@+leo-ver=5-thin-->
<!--@+node:peckj.20140121082121.6610: * @file page.html-->
<!--@@language html-->
<!--@+leo-ver=5-thin-->
<!--@+node:peckj.20140121082121.6614: * @file base.html-->
<!--@@language html-->
<!doctype html>
<html>
<head>
  <meta charset="utf-8">

  
    
      <!--@+leo-ver=5-thin-->
<!--@+node:peckj.20140121082121.6607: * @file _meta.html-->
<!--@@language html-->




<link rel="alternate" type="application/rss+xml" title="a-&gt;ab" href="http://feeds.feedburner.com/suspended-chord/blog">
<link rel="author" href="https://plus.google.com/114523146530319290209/posts">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
<!--@-leo-->
    
  

  <!--@+leo-ver=5-thin-->
<!--@+node:peckj.20140121082121.6608: * @file _style.html-->
<!--@@language html-->


    <link href="/static/assets/packed.css" media="all" rel="stylesheet" type="text/css" />

<!--@-leo-->
  <!--@+leo-ver=5-thin-->
<!--@+node:peckj.20140121082121.6605: * @file _js.html-->
<!--@@language html-->

    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
<!--@-leo-->

  <title>Texas Instruments TLV5618A library for MSP430 LaunchPad | a->ab</title>

</head>
<body>
  <div class="container">

  <!--@+leo-ver=5-thin-->
<!--@+node:peckj.20140121082121.6604: * @file _header.html-->
<!--@@language html-->

<header>
  <h1>a&rarr;ab</h1><h2>computation, game design, and experimentation</h2><br />
  <a href="/">front page</a> | <a href="/about">about</a> | <a href="/archives">archives</a> | <a href="/code-dump">code dump</a> | <a href="/csmm">c.s. for mere mortals</a> | <a href="/tags">tags</a> | <span class='rss'><a href="http://feeds.feedburner.com/suspended-chord/blog">rss feed</a></span>
</header>
 
<!--@-leo-->

<section>
<div class="column">


  <article class="post">
  <header>
  <h1>Texas Instruments TLV5618A library for MSP430 LaunchPad</h1>
  <span class="date">October 5, 2010</span><br />
  <span class="tags">
    tags:&nbsp;
    
    <a href="/tag/code-dump/">code-dump</a>
    
  </span>
  </header>
  <section class="content">
    <p>Hello all,</p>
<p>I have written up another library for the MSP430G2xxx value line chips, this time targeting the TLV5618A 12-bit dual-channel DAC from TI. (Datasheet available <a href="http://www.ti.com/litv/pdf/slas230h">here</a>.)</p>
<p>It has been written in much the same way as <a href="/?c=9">my previous library for the TLV5620</a>. I also plan to port it to the MSPhere framework as I did the <a href="/?c=15">other one</a>.</p>
<p>Anyways, there are a few important things to point out about the TLV5618A. Firstly, the '5618A has a "feature" of applying a 2X gain to the reference voltage, meaning that the input to the REF pin (pin 6 on the DIP) has to be half of the maximum range of whatever you are interfacing the DAC with. To get around this "feature", I used a simple voltage divider formed by two resistors of equal value.</p>
<p>[Aside: For those of you unfamiliar with a voltage divider, I'd suggest reading the <a href="http://en.wikipedia.org/wiki/Voltage_divider">Wikipedia article</a> on them. But to sum up, by using two resistors between ground and your voltage source, tapping between the two resistors supplies a voltage based upon the values of the two resistors, and consistent with the following equation: Vo = (R2 / (R1 + R2)) * Vi, where Vo is the output voltage, Vi is the input voltage, and R1 and R2 are the values of the resistors. It can be shown that when R1 and R2 are the same (lets call it Rx), then the equation simplifies further, to Vo = (Rx / (Rx + Rx)) * Vi = (Rx / (2 * Rx)) * Vi = 0.5 * Vi.</p>
<p>Another thing to mention about the TLV5618A is that it has a power-down feature, in order to help preserve power and reduce consumption. However, one (undocumented, it seems) side effect of this is that putting it into power-down mode resets the value of BUFFER and DACB to CODE_4095 (full-on), causing undesirable effects if you are using both DAC channels the chip offers.</p>
<p>Also, to update the two channels simultaneously, you simply write the value for DACB to BUFFER (DACBUFFER in my library), and then write to DACA. Updating DACA also updates DACB with the value in BUFFER. To use the two separately, simply write to DACB rather than DACA. Writing to DACB also writes to DACBUFFER, so that when DACA is written, DACB is effectively unchanged.</p>
<p>And, last, but in my case also least, the '5618A has two speeds it can operate in, appropriately called SLOW and FAST. This refers to the setting time of each individual channel. But with the speeds that the MSP430G2xxx chips operate at, this is a non-factor. So, use FAST or SLOW to write. I wrote both into the code simply because I like to expose every aspect of a chip via a library, even if it is useless to the application I have in mind. This also makes porting to other architectures easier.</p>
<p>I have written an example application using the library.</p>
<p>Code available:</p>
<p><a href="https://github.com/gatesphere/blog-resources/raw/master/downloads/source/launchpad5618awaveform.c">click here</a>.</p>
<p>This is a modified version of my quad waveform generator for the TLV5620. This one simply produces two waves, updated simultaneously. DACA is a rising sawtooth, and DACB is a falling sawtooth. The circuit is simple, and outlined in the schematic available at the bottom of the post.</p>
<p>So, without further stalling and rambling, here are associated files.</p>
<p>Images:</p>
<p>O'scope capture of output
<img alt="o'scope capture" src="https://github.com/gatesphere/blog-resources/raw/master/downloads/images/launchpad5618a/o-scope.png" /></p>
<p>schematic</p>
<p><img alt="schematic" src="https://github.com/gatesphere/blog-resources/raw/master/downloads/images/launchpad5618a/schematic.png" /></p>
<p>Download MSP430_TLV5618Alib:</p>
<p><a href="https://github.com/gatesphere/blog-resources/raw/master/downloads/source/MSP430_TLV5618Alib_20101005.zip">version 20101005</a></p>
<p>Thanks for reading!</p>
<p>Keep tweaking~ </p>
  </section>
  <section class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript" src="http://disqus.com/forums/suschord/embed.js"> </script>
    <noscript><a href="http://suschord.disqus.com/?url=ref">View the discussion thread.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
  </section>
</article>

</div>
</section>

  <!--@+leo-ver=5-thin-->
<!--@+node:peckj.20140121082121.6603: * @file _footer.html-->
<!--@@language html-->

<footer>
  a&rarr;ab is the blog of Jake Peck, also known as <a href="http://suspended-chord.info/">suspended-chord</a>
</footer>
<!--@-leo-->


  <!--@+leo-ver=5-thin-->
<!--@+node:peckj.20140121082121.6648: * @file _endjs.html-->
<!--@@language html-->

<script type="text/javascript">
var disqus_shortname = 'suschord';
(function () {
  var s = document.createElement('script'); s.async = true;
  s.src = 'http://disqus.com/forums/suschord/count.js';
  (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>
<!--@-leo-->

  </div>
</body>
</html>

<!--@-leo-->